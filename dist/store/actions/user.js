"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var n=e.apply(this,arguments);return new Promise(function(e,r){function t(o,s){try{var u=n[o](s),i=u.value}catch(e){return void r(e)}if(!u.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});e(i)}return t("next")})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.updateUserInfoAsync=void 0;var _user=require("./../types/user.js"),_reduxActions=require("./../../npm/redux-actions/lib/index.js"),_user2=require("./../../api/user.js"),_user3=_interopRequireDefault(_user2),testUserInfo={openId:"openId",uinonId:"uinonId",name:"name",id:"id",telephone:"telephone"},updateUserInfoAsync=exports.updateUserInfoAsync=(0,_reduxActions.createAction)(_user.ASYNC_UPDATEUSERINFO,function(){return new Promise(function(e){"wxwork"===wx.getSystemInfoSync().environment?(console.log("进入企业微信模式"),wx.qy.login({success:function(n){console.log("登录凭证:",n.code),e(testUserInfo)}})):(console.log("进入正常小程序模式"),wx.login({success:function(){function n(e){return r.apply(this,arguments)}var r=_asyncToGenerator(regeneratorRuntime.mark(function n(r){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("登录凭证:",r.code),n.next=3,_user3.default.getUserInfo(r.code);case 3:t=n.sent,console.log("请求后的数据",t),e(t);case 6:case"end":return n.stop()}},n,this)}));return n}()}))})});